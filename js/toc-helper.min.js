/*!
Date Sat Mar 09 2019 00:28:27 GMT+0800 (GMT+08:00) 
Version 1.0.0 
Copyright © 2018-2019 Design By xiaolang
*/
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).TocHelper=i()}(this,function(){"use strict";var t=document,i=window,n=t.body,s=t.querySelector.bind(t),h=t.querySelectorAll.bind(t),e=(i.requestAnimationFrame,/Mobile|Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent)),r=e?"touchstart":"mouseenter",o=e?"touchend":"mouseleave",f=e?"touchend":"click",a=e?"orientationchange":"resize",c="vertical",u="horizontal",l=function(t){return t instanceof HTMLElement},v=function(t){return"string"==typeof t},d=function(t){return"[object Object]"===Object.prototype.toString.call(t)},m=function(t){var n=function(t,n,s){if(t&&!s)return i.getComputedStyle(t).getPropertyValue(n);t.style[n]=s}(t,"position");return n&&"static"!==n},g=t.documentElement.clientHeight,b="toc",p="*[data-toc]",y={dom:p,classNames:{toc:b,fxied:"".concat(b,"-fixed"),brand:"".concat(b,"-brand"),navbar:"".concat(b,"-navbar"),hightlight:"".concat(b,"-hightlight"),nav:"".concat(b,"-nav"),link:"".concat(b,"-link"),active:"active",marginLeft1:"ml-1",marginLeft2:"ml-2",marginLeft3:"ml-3",marginLeft4:"ml-4",marginLeft5:"ml-5",marginLeft6:"ml-6"},hightlight:!0,brand:"目录",t:"shadow",idPrefix:"toc-heading-",offsetBody:n,tocFixed:{top:24,left:0},maxDepth:6,autoScroll:!0},x=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return v(t)||l(t)?i.dom=t:d(t)&&(i=t),this.options=Object.assign({},y,i),this.megre(),this.i(),this};x.prototype={megre:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(d(t)){if(this.options=Object.assign({},this.options,t),v(this.options.dom)&&(this.options.dom=s(this.options.dom)||s(p)),!this.options.dom||!l(this.options.dom))throw new Error("Not found any content, Please sure this dom is exist");var i;this.options.maxDepth=(i=parseInt(this.options.maxDepth||6))>=1&&i<=6?i:6;var h=this.options.offsetBody;if(h&&h!==n)if(l(h))this.options.offsetBody=m(h)?h:n;else if(v(h)){var e=function(t){try{return s(t)}catch(t){return null}}(h);this.options.offsetBody=e&&e!==n&&m(h)?e:n}else this.options.offsetBody=n;else this.options.offsetBody=n;this.toc=s(this.options.dom.dataset.toc)||s(".".concat(this.options.classNames.toc));var r=this.toc&&this.toc.classList;return r&&!r.contains(this.options.classNames.toc)&&r.add(this.options.classNames.toc),this}},reload:function(){this.hightlight=!0===this.options.hightlight?s(".".concat(this.options.classNames.hightlight)):null,this.navbar=this.navbar||s(".".concat(this.options.classNames.navbar)),this.s(),this.fixed(),this.t(),!this.elements&&(this.elements=this.h()),this.events=[this.o.bind(this)],this.u(),this.setActive(s(".".concat(this.options.classNames.toc,' a[href="').concat(location.hash,'"]'))),this.l(),this.v()},i:function(){var n=this;i.addEventListener(a,function(){g=t.documentElement.clientHeight,n.m(n.v,200).call(n)})},v:function(){this.g();var t=this.options.tocFixed,i=this.navbar;if(this.options.autoScroll&&t&&this.toc.offsetHeight+(t.top||0)>g){var n=g-this.p(this.navbar)-(t.top||0);i.style.maxHeight=n+"px",i.style.overflowY="auto"}},g:function(){this.navbar.style.maxHeight="inherit",this.navbar.style.overflowY="inherit"},l:function(){var t=this.navbar,i=this.active;if(i&&function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return i===c?t.scrollHeight>t.clientHeight:i===u&&t.scrollWidth>t.clientWidth}(t)){var n=i.offsetTop;t.scrollTo(0,n)}},o:function(){this.S(),this.l()},L:function(){(this.options.offsetBody===n?i:this.options.offsetBody).addEventListener("scroll",this.events[0])},O:function(){(this.options.offsetBody===n?i:this.options.offsetBody).removeEventListener("scroll",this.events[0])},u:function(){this.O(),this.m(this.L,200).call(this)},reset:function(){this.clear();var i=t.createDocumentFragment(),n=this.elements=this.h(),s=n.targets,h=n.levels;if("string"==typeof this.options.brand){var e=t.createElement("div");e.classList.add(this.options.classNames.brand),e.textContent=this.options.brand,i.appendChild(e)}var r=t.createElement("div");if(r.classList.add(this.options.classNames.navbar),i.appendChild(r),this.navbar=r,!0===this.options.hightlight){var o=t.createElement("div");o.classList.add(this.options.classNames.hightlight),r.appendChild(o)}var f=this.options.classNames.nav,a=null,c=1;h.forEach(function(i,n,h){var e=s[n];if(e)if(0===n||h[n-1]!==i){var o=t.createElement("nav");if(o.classList.add(f),o.appendChild(e),1===i)r.appendChild(o);else if(i>=c)a.appendChild(o);else{for(var u=a.parentNode,l=0;l<c-i-1;l++)u=u.parentNode;u&&u.appendChild(o)}a=o,c=i}else a.appendChild(e)}),this.toc.appendChild(i),this.reload()},scrollTop:function(){var s=this.options.offsetBody;return s===i?s.pageYOffset:s===n?t.documentElement.scrollTop||n.scrollTop:s.scrollTop},P:function(){var t=0,i=this.options.idPrefix;return{next:function(){return t++,{value:"".concat(i).concat(t)}}}},m:function(t,i){return function(){var n=this,s=arguments;t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){t.apply(n,s)},i)}},empty:function(t){if(t&&l(t))for(;t.lastChild;)t.removeChild(t.lastChild)},clear:function(){this.empty(this.toc),this.elements=null},S:function(){var t=this.elements,i=t.offsets,n=t.targets,s=this.scrollTop(),h=i.findIndex(function(t){return Number(t)>s}),e=null;if(0===h)e=n[h];else if(h>0){var r=i[h-1],o=i[h],f=Math.abs((o-r)/4);s<f+r&&s>=r?e=n[h-1]:s<=o&&s>o-f&&(e=n[h])}e&&this.setActive(e)},p:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,s=t.offsetTop;return t.offsetParent&&t.offsetParent!==i&&(s+=this.p(t.offsetParent)),s},h:function(){var i=this,n=this.options.maxDepth,s=n,e=Array.from(this.options.dom.querySelectorAll(["h1","h2","h3","h4","h5","h6"].slice(0,n).join(","))||[]),r=this.P();e.forEach(function(n,e,o){var f=function(t,i,n){if(n<=1||0===i)return 1;if(n>s)return s;for(var h=t.filter(function(t,n){return n<i}),e=h.length-1;e>=0;e--){var r=h[e][1],o=+h[e][3].nodeName[1];if(n<o)return n>r?r:n;if(n===o)return r;if(o<n)return r+1}}(o,e,+n.nodeName[1]),a=i.p(n,i.options.offsetBody);!function(t){t.id&&1===h("#".concat(t.id)).length||(t.id=r.next().value)}(n);var c=function(n,s){if(!n.textContent.replace(/\s/g,""))return!1;var h=i.toc.querySelector('a[href="#'.concat(n.id,'"]'));return h||((h=t.createElement("a")).href="#".concat(n.id),h.classList.add(i.options.classNames.link),s>=2&&h.classList.add("".concat(i.options.classNames["marginLeft".concat(s-1)])),h.textContent=n.textContent),h}(n,f);o.splice(e,1,[e,f,a,n,c])});var o=[],f=[],a=[],c=[];return e.forEach(function(t,i){o[i]=t[1],f[i]=t[2],a[i]=t[3],c[i]=t[4]}),{levels:o,offsets:f,sources:a,targets:c}},j:function(){var t=this.active?this.active.getAttribute("href"):null;t&&(location.hash=t)},setActive:function(t){var i=this.active,n=i?i.classList:[],h=this.options.classNames.active,e=".".concat(this.options.classNames.link,".").concat(this.options.classNames.active);i&&n.contains(h)&&n.remove(h),n=(i=this.active=t&&l(t)?t:s(e))&&(i.classList||[]),i&&!n.contains(h)&&n.add(h),this._(i)},_:function(t){if(this.hightlight)if(t){var i={y:t.offsetTop,height:t.offsetHeight};this.hightlight.style.top=i.y+"px",this.hightlight.style.height=i.height+"px"}else this.hightlight.style.top=0,this.hightlight.style.height=0},A:function(t){this._(t.target)},B:function(){this.setActive(this.active)},N:function(t){this.u(),this.setActive(t.target)},s:function(){if(this.hightlight){var t=this;Array.from(h(".".concat(this.options.classNames.toc," .").concat(this.options.classNames.link))||[]).forEach(function(i){i.addEventListener(r,t.A.bind(t)),i.addEventListener(o,t.B.bind(t)),i.addEventListener(f,t.N.bind(t))})}},t:function(){!1!==this.options.t&&this.toc&&!this.toc.classList.contains(this.options.t)&&this.toc.classList.add(this.options.t)},fixed:function(){var t=this.toc,i=this.options.tocFixed;if(t){var n=this.options.classNames.fxied,s=t.classList;!1===i?(t.style.top="inherit",t.style.left="inherit",s.contains(n)&&s.remove(n)):(!s.contains(n)&&s.add(n),i.top&&(t.style.top=i.top+"px"),i.left&&(t.style.left=i.left+"px"))}}};var S=x,w=x;return S.default=w,S});
